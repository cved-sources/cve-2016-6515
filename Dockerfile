FROM ubuntu:xenial 

LABEL author="opsxcq (opsxcq@strm.sh)"
LABEL maintainer="cved (cved@protonmail.com)"

ENV LANG C.UTF-8
ENV LANGUAGE C.UTF-8
ENV LC_ALL C.UTF-8

ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get -y update \
    && apt-get -y install \
    openssh-server \
    && apt-get autoremove \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*

COPY build/openssh-7.2p2 /src/
RUN dpkg -i /src/* \
    && mkdir /var/run/sshd \
    && rm -rf /src

COPY build/sshd_config /etc/ssh/

EXPOSE 22

COPY build/main.sh /
ENTRYPOINT ["/main.sh"]

CMD ["default"]
